<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Bolos da Val</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 0;
        background-color: #f7f7f7;
      }
      header {
        background-color: #c96a6a;
        color: white;
        padding: 25px;
        text-align: center;
      }
      header h1 {
        margin: 0;
      }
      .container {
        max-width: 1200px;
        margin: 30px auto;
        padding: 0 15px;
      }
      .top-bar {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
      }
      select {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }
      .gallery {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
      }
      .card {
        background-color: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        text-align: center;
        transition: transform 0.35s ease, box-shadow 0.35s ease;
      }
      .card:hover {
        transform: translateY(-8px);
        box-shadow: 0 14px 30px rgba(0, 0, 0, 0.28);
      }
      .card img {
        width: 100%;
        height: 360px;
        object-fit: cover;
        transition: transform 0.35s ease, filter 0.35s ease;
        filter: brightness(0.98) contrast(1.08);
      }
      .card:hover img {
        transform: scale(1.1);
        filter: brightness(1.08) contrast(1.15);
      }
      .card h3 {
        margin: 10px 0 5px;
      }
      .card p {
        margin: 5px 0;
        color: #555;
      }
      .price {
        font-weight: bold;
        color: #c96a6a;
        margin-bottom: 10px;
      }
      .whatsapp {
        display: block;
        background-color: #25d366;
        color: white;
        text-decoration: none;
        padding: 10px;
        margin: 10px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
      }
      .pagination {
        text-align: center;
        margin-top: 30px;
      }
      .pagination button {
        padding: 10px 15px;
        margin: 5px;
        border: none;
        border-radius: 6px;
        background-color: #c96a6a;
        color: white;
        cursor: pointer;
      }
      footer {
        background-color: #333;
        color: white;
        text-align: center;
        padding: 15px;
        margin-top: 40px;
      }
      @media (max-width: 1024px) {
        .gallery {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 600px) {
        .gallery {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Bolos da Val</h1>
      <p>
        Cada cria√ß√£o √© feita com ingredientes selecionados e muito carinho,
        transformando momentos especiais em mem√≥rias deliciosas.
      </p>
    </header>

    <div class="container">
      <div
        style="
          background: #ffffff;
          border-radius: 14px;
          padding: 25px;
          margin-bottom: 30px;
          box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
          text-align: center;
        "
      >
        <h2 style="color: #c96a6a; margin-top: 0">‚ú® Feito com Amor</h2>
        <p
          style="
            font-size: 16px;
            color: #555;
            max-width: 800px;
            margin: 10px auto;
          "
        >
          Explore nossa sele√ß√£o de bolos artesanais, cada um criado com t√©cnicas
          refinadas e ingredientes de primeira qualidade.
        </p>
        <div
          style="
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-top: 20px;
            font-weight: bold;
            color: #c96a6a;
          "
        >
          <div>‚úî Qualidade Premium</div>
          <div>‚úî 100% Artesanal</div>
        </div>
      </div>

      <div
        style="
          background: #fff3cd;
          border: 1px solid #ffeeba;
          color: #856404;
          padding: 15px;
          border-radius: 10px;
          margin-bottom: 20px;
          text-align: center;
          font-weight: bold;
        "
      >
        ‚ö†Ô∏è Entregas apenas em at√© <strong>2 km</strong> do CEP
        <strong>03737-000</strong>
      </div>

      <div
        style="
          background: #ffffff;
          border-radius: 14px;
          padding: 20px;
          margin-bottom: 30px;
          box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        "
      >
        <h3 style="color: #c96a6a; margin-top: 0; text-align: center">
          üìç Bairros Atendidos
        </h3>
        <p style="text-align: center; color: #555; font-size: 14px">
          Entrega v√°lida para regi√µes dentro do raio de 2 km do CEP base.
        </p>
        <ul
          style="
            columns: 2;
            -webkit-columns: 2;
            -moz-columns: 2;
            list-style: disc;
            padding-left: 20px;
            color: #444;
            font-size: 14px;
            max-width: 700px;
            margin: 15px auto;
          "
        >
          <li>Vila Matilde</li>
          <li>Vila Aricanduva</li>
          <li>Jardim Vila Formosa</li>
          <li>Jardim Mar√≠lia</li>
          <li>Vila Dalila</li>
          <li>Jardim Nordeste</li>
          <li>Cidade Patriarca</li>
          <li>Vila Esperan√ßa</li>
        </ul>
        <p style="text-align: center; font-size: 13px; color: #777">
          ‚ùó Caso seu bairro n√£o esteja listado, informe o CEP para valida√ß√£o
          autom√°tica.
        </p>
      </div>

      <div class="top-bar">
        <div>
          <strong>Filtrar por sabor:</strong>
          <select id="filter" onchange="filterCakes()">
            <option value="all">Todos</option>
            <option value="chocolate">Chocolate</option>
            <option value="morango">Morango</option>
            <option value="lim√£o">Lim√£o</option>
            <option value="especial">Especiais</option>
          </select>
        </div>

        <div>
          <strong>Informe seu CEP:</strong><br />
          <input
            type="text"
            id="cepInput"
            placeholder="Ex: 03737000"
            style="
              padding: 8px;
              border-radius: 6px;
              border: 1px solid #ccc;
              width: 160px;
            "
          />
        </div>
      </div>

      <div class="gallery" id="gallery"></div>

      <div style="text-align: center; margin: 20px 0">
        <button class="whatsapp" onclick="finalizarPedido()">
          üõí Finalizar pedido no WhatsApp
        </button>
      </div>

      <div class="pagination">
        <button onclick="prevPage()">Anterior</button>
        <button onclick="nextPage()">Pr√≥ximo</button>
      </div>
    </div>

    <div
      id="carrinho"
      style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #fff;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        width: 260px;
        z-index: 999;
      "
    >
      <h3 style="margin-top: 0; color: #c96a6a">üõí Seu Pedido</h3>
      <ul
        id="listaCarrinho"
        style="list-style: none; padding: 0; font-size: 14px"
      ></ul>
      <p style="font-size: 13px">üöö Taxa de entrega: R$ 10,00</p>
      <strong id="totalPedido">Total: R$ 0,00</strong><br /><br />
      <button class="whatsapp" onclick="finalizarPedido()">
        Finalizar no WhatsApp
      </button>
    </div>

    <footer>
      <p>üìû Encomendas pelo WhatsApp | ¬© 2026 Bolos da Val</p>
    </footer>

    <script>
      const cakes = [
        {
          name: 'Bolo de Chocolate',
          flavor: 'chocolate',
          price: 80,
          img: 'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo de Morango',
          flavor: 'morango',
          price: 85,
          img: 'https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Red Velvet',
          flavor: 'especial',
          price: 95,
          img: 'https://images.unsplash.com/photo-1614707267537-b85aaf00c4b7?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo Decorado',
          flavor: 'especial',
          price: 120,
          img: 'https://images.unsplash.com/photo-1621303837174-89787a7d4729?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo de Lim√£o',
          flavor: 'lim√£o',
          price: 75,
          img: 'https://images.unsplash.com/photo-1608219959300-8d7c3c4d8b86?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo de Anivers√°rio',
          flavor: 'especial',
          price: 110,
          img: 'https://images.unsplash.com/photo-1586985289688-ca3cf47d3e6e?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo Gourmet',
          flavor: 'chocolate',
          price: 130,
          img: 'https://images.unsplash.com/photo-1599785209793-c9b8a0b0b3c6?auto=format&fit=crop&w=800&q=80',
        },
        {
          name: 'Bolo de Casamento',
          flavor: 'especial',
          price: 250,
          img: 'https://images.unsplash.com/photo-1527515545081-5db817172677?auto=format&fit=crop&w=800&q=80',
        },
      ];

      let currentPage = 0;
      let filtered = cakes;
      const perPage = 8;
      let carrinho = [];
      const TAXA_ENTREGA = 10;

      // Coordenadas fixas da confeitaria (CEP 03737-000 aproximado)
      // Coordenadas reais aproximadas do CEP 03737-000 (Zona Leste - SP)
      const BASE_LAT = -23.5379;
      const BASE_LNG = -46.5096;
      const RAIO_MAX_KM = 2;

      function render() {
        const gallery = document.getElementById('gallery');
        gallery.innerHTML = '';
        const start = currentPage * perPage;
        const items = filtered.slice(start, start + perPage);

        items.forEach((cake) => {
          gallery.innerHTML += `
      <div class="card">
        <img src="${cake.img}" alt="${cake.name}">
        <h3>${cake.name}</h3>
        <p>Sabor: ${cake.flavor}</p>
        <div class="price">R$ ${cake.price.toFixed(2).replace('.', ',')}</div>
        <button class="whatsapp" onclick="adicionarAoCarrinho('${
          cake.name
        }')">Adicionar ao pedido</button>
      </div>`;
        });
      }

      function nextPage() {
        if ((currentPage + 1) * perPage < filtered.length) {
          currentPage++;
          render();
        }
      }

      function prevPage() {
        if (currentPage > 0) {
          currentPage--;
          render();
        }
      }

      function filterCakes() {
        const value = document.getElementById('filter').value;
        filtered =
          value === 'all' ? cakes : cakes.filter((c) => c.flavor === value);
        currentPage = 0;
        render();
      }

      function adicionarAoCarrinho(nome) {
        const item = carrinho.find((i) => i.nome === nome);
        if (item) item.qtd++;
        else carrinho.push({ nome, qtd: 1 });
        atualizarCarrinho();
      }

      function removerDoCarrinho(nome) {
        carrinho = carrinho.filter((i) => i.nome !== nome);
        atualizarCarrinho();
      }

      function atualizarCarrinho() {
        const lista = document.getElementById('listaCarrinho');
        const totalEl = document.getElementById('totalPedido');
        lista.innerHTML = '';
        let total = 0;

        carrinho.forEach((item) => {
          const bolo = cakes.find((c) => c.name === item.nome);
          total += bolo.price * item.qtd;
          lista.innerHTML += `<li>${item.nome} x${item.qtd} <button onclick="removerDoCarrinho('${item.nome}')">‚ùå</button></li>`;
        });

        if (carrinho.length > 0) total += TAXA_ENTREGA;
        totalEl.innerText = 'Total: R$ ' + total.toFixed(2).replace('.', ',');
      }

      function calcularDistancia(lat1, lon1, lat2, lon2) {
        // F√≥rmula de Haversine (corrigida)
        const R = 6371; // raio da Terra em km
        const dLat = ((lat2 - lat1) * Math.PI) / 180;
        const dLon = ((lon2 - lon1) * Math.PI) / 180;

        const a =
          Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos((lat1 * Math.PI) / 180) *
            Math.cos((lat2 * Math.PI) / 180) *
            Math.sin(dLon / 2) *
            Math.sin(dLon / 2);

        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        return R * c;
      }

      function finalizarPedido() {
        if (carrinho.length === 0) {
          alert('Seu pedido est√° vazio.');
          return;
        }

        if (!navigator.geolocation) {
          alert('Seu navegador n√£o suporta localiza√ß√£o.');
          return;
        }

        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const userLat = pos.coords.latitude;
            const userLng = pos.coords.longitude;

            const distancia = calcularDistancia(
              userLat,
              userLng,
              BASE_LAT,
              BASE_LNG
            );

            if (distancia > RAIO_MAX_KM) {
              alert(
                '‚ùå Entrega indispon√≠vel. Atendemos apenas at√© 2 km da confeitaria.'
              );
              return;
            }

            const resumo = carrinho
              .map((i) => `${i.nome} x${i.qtd}`)
              .join(', ');
            const msg = encodeURIComponent(`Pedido: ${resumo}
Dist√¢ncia: ${distancia.toFixed(2)} km
Taxa: R$ ${TAXA_ENTREGA}`);
            window.open(`https://wa.me/5599999999999?text=${msg}`, '_blank');
          },
          () => {
            alert('N√£o foi poss√≠vel obter sua localiza√ß√£o.');
          }
        );
      }

      render();
    </script>
  </body>
</html>
